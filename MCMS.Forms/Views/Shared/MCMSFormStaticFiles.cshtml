@using MCMS.Forms
@{
    var pathFromEnv = Environment.GetEnvironmentVariable("MCMS_FORM_STATIC_FILES_PATH");
    var hasPathFromEnv = pathFromEnv is {};

    var basePath = hasPathFromEnv && !string.IsNullOrEmpty(pathFromEnv) ? pathFromEnv : "/mcms-forms-files/";
    if (basePath.EndsWith("/"))
    {
        basePath = basePath.Substring(0, basePath.Length - 1);
    }
    if (!hasPathFromEnv)
    {
        var version = AssemblyVersionHelper.Version;
        basePath += $"/{version}";
    }
}
<script>
    var mcmsFormsStaticFiles = {
        load: function () {
            if (this.loaded) { return; }
            this.loaded = true;
            for (var i = 0; i < this.files.js.length; i++) {
                var script = document.createElement('script');
                script.src = this.files.js[i];
                document.body.appendChild(script);
            }
            for (var j = 0; j < this.files.css.length; j++) {
                var link = document.createElement('link');
                link.href = this.files.css[j];
                link.rel = 'stylesheet';
                document.head.appendChild(link);
            }
        },
        loaded: false,
        files: {
            js: [
               "@basePath/mcms-form.polyfills.js",
               "@basePath/mcms-form.main.js"
            ],
            css:  ["@basePath/styles.css"]
        }
    }
</script>